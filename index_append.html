<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title></title>
		<link rel="stylesheet" href="css/style.css" />
		<link rel="stylesheet" href="css/magnific-popup.css">
		<script src="js/jquery-1.7.2.min.js"></script>
		<script src="js/jquery.magnific-popup.js"></script>
		<script src="js/masonry.pkgd.js"></script>
		<script type="text/javascript" src="js/imagesloaded.js"></script>
		<script type="text/javascript" src="js/infinite-scoll.js" ></script>

		<style>

		</style>
		<script>
			$(function() {
				var $grid;
				$('.grid').imagesLoaded(function() {
					// images have loaded
					$grid = $('.grid').masonry({
						//				  columnWidth: 160,
						itemSelector: '.grid-item',
						fixedContentPos: true
					});
				});
				$('.append-button').on('click', function() {debugger;
					$.ajax({
						url: "data.json",
						data: {},
						type: "GET",
						dataType: 'json',
						success: function(data) {
							var list = data.list || [];
							var elems = [];
							for (var i = 0; i < list.length; i++) {
								var data = list[i];
								var item = $("#template").find(".grid-item").clone(); // clone 
								item.find(".pro-img").attr("src", data.img);
								item.find(".desc").html(data.desc);
								item.find(".comment-content").html(data.comment);
								item.find(".num").html(data.commentNum);
								elems.push(item[0]);
							}
							var $elems = $(elems);
							$elems.imagesLoaded(function() {
								// images have loaded
								$grid.append($elems).masonry('appended', $elems);
							});
						},
						error: function(er) {}
					});
				});
				$(".grid").on('click', '.grid-item', function() {
					$('.grid').magnificPopup({
						items: [{
							src: $($('#popup-template').find(".popup-content")[0]), // Dynamically created element
							type: 'inline'
						}],
						gallery: {
							enabled: true
						},
						type: 'image' // this is a default type
					});
				})
			});
		</script>
	</head>

	<body>
		<h1>Masonry - appended</h1>
		<div class="layout-main">
			<div class="grid">
				<div class="grid-item">
					<div class="gird-content">
						<img class="pro-img" src="img/m1.jpg" />
						<h3 class="desc">Sea blue, the new spring 2016 in Europe and the trerament, 2530</h3>
						<div class="comment">
							<div class="comment-content">This dress is very beautiful</div>
							<div class="comment-num">
								<span class="icon"></span>
								<span class="num">2000</span>
							</div>
						</div>
					</div>
				</div>
				<div class="grid-item">
					<div class="gird-content">
						<img class="pro-img" src="img/m4.jpg" />
						<h3 class="desc">Sea blue, the new spring 2016 in Eale temperament, 2530</h3>
						<div class="comment">
							<div class="comment-content">This dress is very beautiful I like very much, you will like it</div>
							<div class="comment-num">
								<span class="icon"></span>
								<span class="num">2000</span>
							</div>
						</div>
					</div>
				</div>
				<div class="grid-item">
					<div class="gird-content">
						<img src="img/m3.jpg" />
						<h3 class="desc">Sea blue, the new spring 2016 in Europe and the trend of printing leisure coat lapelent, 2530</h3>
						<div class="comment">
							<div class="comment-content">This dress is very beautiful I like very much, you will like it</div>
							<div class="comment-num">
								<span class="icon"></span>
								<span class="num">2000</span>
							</div>
						</div>
					</div>
				</div>
				<div class="grid-item">
					<div class="gird-content">
						<img class="pro-img" src="img/m3.jpg" />
						<h3 class="desc">Sea blue, the new spring 2016 in Eue temperament, 2530</h3>
						<div class="comment">
							<div class="comment-content">This dress is very beautiful I like very much, you will like it</div>
							<div class="comment-num">
								<span class="icon"></span>
								<span class="num">2000</span>
							</div>
						</div>
					</div>
				</div>
				<div class="grid-item">
					<div class="gird-content">
						<img class="pro-img" src="img/m2.jpg" />
						<h3 class="desc">Sea blue, the new springhirt female temperament, 2530</h3>
						<div class="comment">
							<div class="comment-content">This dress is very beautiful I like very much, you will like it</div>
							<div class="comment-num">
								<span class="icon"></span>
								<span class="num">2000</span>
							</div>
						</div>
					</div>
				</div>
				<div class="grid-item">
					<div class="gird-content">
						<img class="pro-img" src="img/m4.jpg" />
						<h3 class="desc">Sea blue, the new ale temperament, 2530</h3>
						<div class="comment">
							<div class="comment-content">This dress is very beautiful I like very much, you will like it</div>
							<div class="comment-num">
								<span class="icon"></span>
								<span class="num">2000</span>
							</div>
						</div>
					</div>
				</div>

			</div>
			<div>
			</div>

			<div id="template" style="display: none;">
				<div class="grid-item">
					<div class="gird-content">
						<img class="pro-img" src="img/m2.jpg" />
						<h3 class="desc"></h3>
						<div class="comment">
							<div class="comment-content"></div>
							<div class="comment-num">
								<span class="icon"></span>
								<span class="num"></span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="popup-template" style="display: none;">
				<div class="popup-content">
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
					<div class="tt">tt</div>
				</div>
			</div>
			<p>
				<button class="append-button">Append new items</button>
			</p>
		</div>
	</body>

</html>